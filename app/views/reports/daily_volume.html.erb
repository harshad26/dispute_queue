<div style="margin-bottom: 20px;">
  <%= link_to "â† Back to Reports", reports_money_math_path, style: "color: #666; text-decoration: none;" %>
</div>

<h2>Daily Dispute Volume</h2>

<div class="card" style="margin-bottom: 30px;">
  <%= form_with url: reports_daily_volume_path, method: :get, local: true, style: "display: flex; gap: 15px; align-items: flex-end;" do |f| %>
    <div>
      <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">From</label>
      <%= date_field_tag :from, @from, class: "form-control", style: "padding: 8px; border: 1px solid #ddd; border-radius: 4px;" %>
    </div>
    
    <div>
      <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">To</label>
      <%= date_field_tag :to, @to, class: "form-control", style: "padding: 8px; border: 1px solid #ddd; border-radius: 4px;" %>
    </div>
    
    <%= f.submit "Filter", class: "btn btn-primary" %>
  <% end %>
</div>

<div class="card">
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Disputes</th>
        <th>Total Amount</th>
      </tr>
    </thead>
    <tbody>
      <% if @disputes_by_day.any? %>
        <% @disputes_by_day.each do |day| %>
          <tr>
            <td><%= day[:date].strftime("%b %d, %Y") %></td>
            <td><%= day[:count] %></td>
            <td><%= number_to_currency(day[:amount] / 100.0) %></td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="3" style="text-align: center; color: #888;">No disputes found in this range.</td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<h3>Chart Data (JSON)</h3>
<div class="card" style="background: #f5f5f5; font-family: monospace; font-size: 12px; overflow-x: auto;">
  <%= @disputes_by_day.to_json %>
</div>
